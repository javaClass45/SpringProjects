create database rest_db;

create table person (
                        id int primary key generated by default as identity ,
                        username varchar(100) not null ,
                        password varchar(255) not null,
                        email varchar(100),
                        role varchar(25)
);



create table event(
                      id int primary key generated by default as identity ,
                      title varchar(100) not null ,
                      description varchar(255) not null ,
                      person_id int references person(id) on delete set null ,
                      deadline_date date ,
                      deadline_time time,
                      complited boolean
);



insert into Person (username, "password", email, role )
values ('user1', 'test_password', 'user1@mail.com', 'ROLE_ADMIN');

insert into Person (username, "password", email, role)
values ('user2', 'test_password', 'user2@mail.com', 'ROLE_USER');



UPDATE Person SET password = '$2a$12$ufY/b.F8ptVsZ8D7vA3nk.P.ZigmSAOy3CerkdYvDgIXZ7HCMXCT2' WHERE id = 5;

insert into event(title, description, person_id, deadline_date, deadline_time, complited)
 values ('nazvanie', 'mnogo slov ob evente', 3, '2022-08-31', '18:00:00', false);
insert into event(title, description, person_id, deadline_date, deadline_time, complited)
 values ('nazvanie2', 'mnogo slov ob evente2', 4, '2022-08-31', '18:00:00', true);
insert into event(title, description, person_id, deadline_date, deadline_time, complited)
 values ('nazvanie3', 'mnogo slov ob evente3 mnogo slov ob evente3', 5, '2022-09-30', '12:00:00', false);


select *
from person;

select *
from event;

-- очистить таблицу
truncate table person cascade ;

update person set role='ROLE_ADMIN' where id=9;

delete from event;